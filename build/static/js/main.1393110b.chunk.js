(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports=a(27)},15:function(e,t,a){},19:function(e,t,a){},27:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),c=a(8),l=a.n(c),r=(a(15),a(6)),o=a.n(r),m=a(9),i=a(1),d=a(2),u=a(4),h=a(3),f=a(5),p=(a(19),function(e){var t=e.messageList,a=e.composeToggle,s=e.readMarker,c=e.unreadMarker,l=e.selectAll,r=t.filter(function(e){return void 0!==e.read&&!1===e.read});return n.a.createElement("div",{className:"row toolbar"},n.a.createElement("div",{className:"col-md-12"},n.a.createElement("p",{className:"pull-right"},n.a.createElement("span",{className:"badge badge"},r.length),1===r.length?"unread message":"unread messages"),n.a.createElement("a",{onClick:a,className:"btn btn-danger"},n.a.createElement("i",{className:"fa fa-plus"})),n.a.createElement("button",{onClick:l,className:"btn btn-default"},n.a.createElement("i",{className:"fa fa-square-o"})),n.a.createElement("button",{onClick:s,className:"btn btn-default"},"Mark As Read"),n.a.createElement("button",{onClick:c,className:"btn btn-default"},"Mark As Unread"),n.a.createElement("select",{className:"form-control label-select",disabled:"disabled"},n.a.createElement("option",null,"Apply label"),n.a.createElement("option",{value:"dev"},"dev"),n.a.createElement("option",{value:"personal"},"personal"),n.a.createElement("option",{value:"gschool"},"gschool")),n.a.createElement("select",{className:"form-control label-select",disabled:"disabled"},n.a.createElement("option",null,"Remove label"),n.a.createElement("option",{value:"dev"},"dev"),n.a.createElement("option",{value:"personal"},"personal"),n.a.createElement("option",{value:"gschool"},"gschool")),n.a.createElement("button",{className:"btn btn-default",disabled:"disabled"},n.a.createElement("i",{className:"fa fa-trash-o"}))))}),b=function(e){var t=e.messageLabels;return n.a.createElement("span",{className:"label label-warning"}," ",t," ")},g=function(e){var t=e.message,a=e.dataPatcher,s=e.messageSelector;return n.a.createElement("div",{className:"row message ".concat(void 0===t.read||t.read?"read":"unread"," ").concat(t.selected?"selected":""," ")},n.a.createElement("div",{className:"col-xs-1"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-2"},n.a.createElement("input",{type:"checkbox",onChange:function(){return s(t.id)},checked:!!t.selected})),n.a.createElement("div",{className:"col-xs-2"},n.a.createElement("i",{onClick:function(){a(t.id,"star")},className:"star fa ".concat(t.starred?"fa-star":"fa-star-o")})))),n.a.createElement("div",{className:"col-xs-11"},t.labels.map(function(e,t){return n.a.createElement(b,{key:t,messageLabels:e})}),n.a.createElement("a",null,t.subject)))},E=function(e){var t=e.messageList,a=e.dataPatcher,s=e.messageSelector;return n.a.createElement("div",null,t.map(function(e){return n.a.createElement(g,{messageSelector:s,dataPatcher:a,key:e.id,message:e})}))},v=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).subjectUpdater=function(e){console.log(a.state.subjectValue),a.setState({subjectValue:e.target.value})},a.bodyUpdater=function(e){console.log(a.state.bodyValue),a.setState({bodyValue:e.target.value})},a.dataPasser=function(){a.props.dataPoster(a.state)},a.state={subjectValue:"",bodyValue:""},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return n.a.createElement("form",{className:"form-horizontal well"},n.a.createElement("div",{className:"form-group"},n.a.createElement("div",{className:"col-sm-8 col-sm-offset-2"},n.a.createElement("h4",null,"Compose Message"))),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"subject",className:"col-sm-2 control-label"},"Subject"),n.a.createElement("div",{className:"col-sm-8"},n.a.createElement("input",{type:"text",onChange:this.subjectUpdater,value:this.state.subjectValue,className:"form-control",id:"subject",placeholder:"Enter a subject",name:"subject"}))),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"body",className:"col-sm-2 control-label"},"Body"),n.a.createElement("div",{className:"col-sm-8"},n.a.createElement("textarea",{name:"body",onChange:this.bodyUpdater,value:this.state.bodyValue,id:"body",className:"form-control"}))),n.a.createElement("div",{className:"form-group"},n.a.createElement("div",{className:"col-sm-8 col-sm-offset-2"},n.a.createElement("input",{onClick:this.dataPasser,value:"Send",className:"btn btn-primary"}))))}}]),t}(s.Component),N=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).state={messageList:[],allSelected:!1,compose:!1},a.dataFetcher=function(){fetch("http://localhost:8082/api/messages").then(function(e){return e.json()}).then(function(e){return a.setState({messageList:e})}).then(function(){return a.state.messageList.map(function(e){return void 0!==e.selected?e:(e.selected=!1,e)})})},a.dataPatcher=function(e,t,s){fetch("http://localhost:8082/api/messages",{method:"PATCH",body:JSON.stringify({messageIds:[e],command:t,read:s}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(a.dataFetcher).catch(function(e){return console.error("Error:",e)})},a.dataPoster=function(e){fetch("http://localhost:8082/api/messages",{method:"POST",body:JSON.stringify({subject:e.subjectValue,read:!1,starred:!1,labels:[],body:e.bodyValue,id:a.state.messageList.length+1}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){return console.log("Success:",e)}).then(a.setState({compose:!1})).then(a.dataFetcher).catch(function(e){return console.error("Error:",e)})},a.messageSelector=function(e){var t=a.state.messageList.map(function(t){return t.id===e?(t.selected=!t.selected,t):t});a.setState({messageList:t})},a.readMarker=function(){a.state.messageList.map(function(e){e.selected&&a.dataPatcher(e.id,"read",!0)})},a.unreadMarker=function(){a.state.messageList.map(function(e){e.selected&&a.dataPatcher(e.id,"read",!1)})},a.selectAll=function(){a.state.allSelected?(a.state.messageList.map(function(e){e.selected=!1}),a.setState({allSelected:!1})):(a.state.messageList.map(function(e){e.selected=!0}),a.setState({allSelected:!0}))},a.composeToggle=function(){a.setState({compose:!a.state.compose})},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.dataFetcher();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement("div",{className:"col-md-12"},n.a.createElement(p,{selectAll:this.selectAll,unreadMarker:this.unreadMarker,readMarker:this.readMarker,composeToggle:this.composeToggle,messageList:this.state.messageList}),this.state.compose?n.a.createElement(v,{dataPoster:this.dataPoster}):"",n.a.createElement(E,{messageSelector:this.messageSelector,dataPatcher:this.dataPatcher,messageList:this.state.messageList}))}}]),t}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(21),a(23),a(25);l.a.render(n.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[10,2,1]]]);
//# sourceMappingURL=main.1393110b.chunk.js.map